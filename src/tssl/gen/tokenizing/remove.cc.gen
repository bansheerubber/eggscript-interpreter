ts::String* words = %%words%%;
int count = %%index%%;
string output;
string currentWord;

int spaceCount = 0;
for(uint16_t i = 0; i < words->size; i++) {
	char character = words->string[i];
	if(%%comparison%%) {
		spaceCount++;
		currentWord = "";
	}
	else {
		currentWord += character;
	}

	if(spaceCount != count) {
		if( // edge case for count = 0
			!(%%comparison%%)
			|| count != 0
			|| spaceCount != 1
		) {
			output += character;
		}
	}
}